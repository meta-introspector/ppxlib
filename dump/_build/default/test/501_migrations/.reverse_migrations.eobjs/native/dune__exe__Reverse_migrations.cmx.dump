[
  structure_item (test/501_migrations/reverse_migrations.ml[1,0+0]..[1,0+72])
    Pstr_module
    "Reverse" (test/501_migrations/reverse_migrations.ml[1,0+7]..[1,0+14])
      module_expr (test/501_migrations/reverse_migrations.ml[1,0+17]..[1,0+72])
        Pmod_apply
        module_expr (test/501_migrations/reverse_migrations.ml[1,0+17]..[1,0+38])
          Pmod_ident "Ppxlib_ast.Select_ast" (test/501_migrations/reverse_migrations.ml[1,0+17]..[1,0+38])
        module_expr (test/501_migrations/reverse_migrations.ml[1,0+40]..[1,0+71])
          Pmod_ident "Ppxlib_ast__.Versions.OCaml_501" (test/501_migrations/reverse_migrations.ml[1,0+40]..[1,0+71])
  structure_item (test/501_migrations/reverse_migrations.ml[3,74+0]..[7,180+66])
    Pstr_value Nonrec
    [
      <def>
        pattern (test/501_migrations/reverse_migrations.ml[3,74+4]..[3,74+6])
          Ppat_construct "()" (test/501_migrations/reverse_migrations.ml[3,74+4]..[3,74+6])
          None
        expression (test/501_migrations/reverse_migrations.ml[4,83+2]..[7,180+66])
          Pexp_let Nonrec
          [
            <def>
              pattern (test/501_migrations/reverse_migrations.ml[4,83+6]..[4,83+10])
                Ppat_var "impl" (test/501_migrations/reverse_migrations.ml[4,83+6]..[4,83+10])
              expression (test/501_migrations/reverse_migrations.ml[4,83+11]..[5,100+74]) ghost
                Pexp_fun
                Nolabel
                None
                pattern (test/501_migrations/reverse_migrations.ml[4,83+11]..[4,83+14])
                  Ppat_var "str" (test/501_migrations/reverse_migrations.ml[4,83+11]..[4,83+14])
                expression (test/501_migrations/reverse_migrations.ml[5,100+4]..[5,100+74])
                  Pexp_apply
                  expression (test/501_migrations/reverse_migrations.ml[5,100+36]..[5,100+38])
                    Pexp_ident "@@" (test/501_migrations/reverse_migrations.ml[5,100+36]..[5,100+38])
                  [
                    <arg>
                    Nolabel
                      expression (test/501_migrations/reverse_migrations.ml[5,100+4]..[5,100+35])
                        Pexp_ident "Reverse.Of_ocaml.copy_structure" (test/501_migrations/reverse_migrations.ml[5,100+4]..[5,100+35])
                    <arg>
                    Nolabel
                      expression (test/501_migrations/reverse_migrations.ml[5,100+39]..[5,100+74])
                        Pexp_apply
                        expression (test/501_migrations/reverse_migrations.ml[5,100+39]..[5,100+70])
                          Pexp_ident "Reverse.To_ocaml.copy_structure" (test/501_migrations/reverse_migrations.ml[5,100+39]..[5,100+70])
                        [
                          <arg>
                          Nolabel
                            expression (test/501_migrations/reverse_migrations.ml[5,100+71]..[5,100+74])
                              Pexp_ident "str" (test/501_migrations/reverse_migrations.ml[5,100+71]..[5,100+74])
                        ]
                  ]
          ]
          expression (test/501_migrations/reverse_migrations.ml[7,180+2]..[7,180+66])
            Pexp_apply
            expression (test/501_migrations/reverse_migrations.ml[7,180+2]..[7,180+39])
              Pexp_ident "Ppxlib.Driver.register_transformation" (test/501_migrations/reverse_migrations.ml[7,180+2]..[7,180+39])
            [
              <arg>
              Labelled "impl"
                expression (test/501_migrations/reverse_migrations.ml[7,180+41]..[7,180+45])
                  Pexp_ident "impl" (test/501_migrations/reverse_migrations.ml[7,180+41]..[7,180+45])
              <arg>
              Nolabel
                expression (test/501_migrations/reverse_migrations.ml[7,180+46]..[7,180+66])
                  Pexp_constant PConst_string("reverse_migrations",(test/501_migrations/reverse_migrations.ml[7,180+47]..[7,180+65]),None)
            ]
    ]
  structure_item (test/501_migrations/reverse_migrations.ml[9,248+0]..[9,248+36])
    Pstr_value Nonrec
    [
      <def>
        pattern (test/501_migrations/reverse_migrations.ml[9,248+4]..[9,248+6])
          Ppat_construct "()" (test/501_migrations/reverse_migrations.ml[9,248+4]..[9,248+6])
          None
        expression (test/501_migrations/reverse_migrations.ml[9,248+9]..[9,248+36])
          Pexp_apply
          expression (test/501_migrations/reverse_migrations.ml[9,248+9]..[9,248+33])
            Pexp_ident "Ppxlib.Driver.standalone" (test/501_migrations/reverse_migrations.ml[9,248+9]..[9,248+33])
          [
            <arg>
            Nolabel
              expression (test/501_migrations/reverse_migrations.ml[9,248+34]..[9,248+36])
                Pexp_construct "()" (test/501_migrations/reverse_migrations.ml[9,248+34]..[9,248+36])
                None
          ]
    ]
]

module Reverse = (Ppxlib_ast.Select_ast)(Ppxlib_ast__.Versions.OCaml_501)
let () =
  let impl str =
    Reverse.Of_ocaml.copy_structure @@ (Reverse.To_ocaml.copy_structure str) in
  Ppxlib.Driver.register_transformation ~impl "reverse_migrations"
let () = Ppxlib.Driver.standalone ()
[
  structure_item (test/501_migrations/reverse_migrations.ml[1,0+0]..test/501_migrations/reverse_migrations.ml[1,0+72])
    Tstr_module
    Reverse/2236
      module_expr (test/501_migrations/reverse_migrations.ml[1,0+17]..test/501_migrations/reverse_migrations.ml[1,0+72])
        Tmod_apply
        module_expr (test/501_migrations/reverse_migrations.ml[1,0+17]..test/501_migrations/reverse_migrations.ml[1,0+38])
          module_expr (test/501_migrations/reverse_migrations.ml[1,0+17]..test/501_migrations/reverse_migrations.ml[1,0+38])
            Tmod_ident "Ppxlib_ast!.Select_ast"
        module_expr (test/501_migrations/reverse_migrations.ml[1,0+40]..test/501_migrations/reverse_migrations.ml[1,0+71])
          module_expr (test/501_migrations/reverse_migrations.ml[1,0+40]..test/501_migrations/reverse_migrations.ml[1,0+71])
            Tmod_ident "Ppxlib_ast__!.Versions.OCaml_501"
  structure_item (test/501_migrations/reverse_migrations.ml[3,74+0]..test/501_migrations/reverse_migrations.ml[7,180+66])
    Tstr_value Nonrec
    [
      <def>
        pattern (test/501_migrations/reverse_migrations.ml[3,74+4]..test/501_migrations/reverse_migrations.ml[3,74+6])
          Tpat_construct "()"
          []
        expression (test/501_migrations/reverse_migrations.ml[4,83+2]..test/501_migrations/reverse_migrations.ml[7,180+66])
          Texp_let Nonrec
          [
            <def>
              pattern (test/501_migrations/reverse_migrations.ml[4,83+6]..test/501_migrations/reverse_migrations.ml[4,83+10])
                Tpat_var "impl/2237"
              expression (test/501_migrations/reverse_migrations.ml[4,83+11]..test/501_migrations/reverse_migrations.ml[5,100+74]) ghost
                Texp_function
                Nolabel
                [
                  <case>
                    pattern (test/501_migrations/reverse_migrations.ml[4,83+11]..test/501_migrations/reverse_migrations.ml[4,83+14])
                      Tpat_var "str/2239"
                    expression (test/501_migrations/reverse_migrations.ml[5,100+4]..test/501_migrations/reverse_migrations.ml[5,100+74])
                      Texp_apply
                      expression (test/501_migrations/reverse_migrations.ml[5,100+36]..test/501_migrations/reverse_migrations.ml[5,100+38])
                        Texp_ident "Stdlib!.@@"
                      [
                        <arg>
                          Nolabel
                          expression (test/501_migrations/reverse_migrations.ml[5,100+4]..test/501_migrations/reverse_migrations.ml[5,100+35])
                            Texp_ident "Reverse/2236.Of_ocaml.copy_structure"
                        <arg>
                          Nolabel
                          expression (test/501_migrations/reverse_migrations.ml[5,100+39]..test/501_migrations/reverse_migrations.ml[5,100+74])
                            Texp_apply
                            expression (test/501_migrations/reverse_migrations.ml[5,100+39]..test/501_migrations/reverse_migrations.ml[5,100+70])
                              Texp_ident "Reverse/2236.To_ocaml.copy_structure"
                            [
                              <arg>
                                Nolabel
                                expression (test/501_migrations/reverse_migrations.ml[5,100+71]..test/501_migrations/reverse_migrations.ml[5,100+74])
                                  Texp_ident "str/2239"
                            ]
                      ]
                ]
          ]
          expression (test/501_migrations/reverse_migrations.ml[7,180+2]..test/501_migrations/reverse_migrations.ml[7,180+66])
            Texp_apply
            expression (test/501_migrations/reverse_migrations.ml[7,180+2]..test/501_migrations/reverse_migrations.ml[7,180+39])
              Texp_ident "Ppxlib!.Driver.register_transformation"
            [
              <arg>
                Optional "extensions"
                expression (_none_[0,0+-1].._none_[0,0+-1]) ghost
                  Texp_construct "None"
                  []
              <arg>
                Optional "rules"
                expression (_none_[0,0+-1].._none_[0,0+-1]) ghost
                  Texp_construct "None"
                  []
              <arg>
                Optional "enclose_impl"
                expression (_none_[0,0+-1].._none_[0,0+-1]) ghost
                  Texp_construct "None"
                  []
              <arg>
                Optional "enclose_intf"
                expression (_none_[0,0+-1].._none_[0,0+-1]) ghost
                  Texp_construct "None"
                  []
              <arg>
                Optional "impl"
                expression (test/501_migrations/reverse_migrations.ml[7,180+41]..test/501_migrations/reverse_migrations.ml[7,180+45])
                  Texp_construct "Some"
                  [
                    expression (test/501_migrations/reverse_migrations.ml[7,180+41]..test/501_migrations/reverse_migrations.ml[7,180+45])
                      Texp_ident "impl/2237"
                  ]
              <arg>
                Optional "intf"
                expression (_none_[0,0+-1].._none_[0,0+-1]) ghost
                  Texp_construct "None"
                  []
              <arg>
                Optional "lint_impl"
                expression (_none_[0,0+-1].._none_[0,0+-1]) ghost
                  Texp_construct "None"
                  []
              <arg>
                Optional "lint_intf"
                expression (_none_[0,0+-1].._none_[0,0+-1]) ghost
                  Texp_construct "None"
                  []
              <arg>
                Optional "preprocess_impl"
                expression (_none_[0,0+-1].._none_[0,0+-1]) ghost
                  Texp_construct "None"
                  []
              <arg>
                Optional "preprocess_intf"
                expression (_none_[0,0+-1].._none_[0,0+-1]) ghost
                  Texp_construct "None"
                  []
              <arg>
                Optional "instrument"
                expression (_none_[0,0+-1].._none_[0,0+-1]) ghost
                  Texp_construct "None"
                  []
              <arg>
                Optional "aliases"
                expression (_none_[0,0+-1].._none_[0,0+-1]) ghost
                  Texp_construct "None"
                  []
              <arg>
                Nolabel
                expression (test/501_migrations/reverse_migrations.ml[7,180+46]..test/501_migrations/reverse_migrations.ml[7,180+66])
                  Texp_constant Const_string("reverse_migrations",(test/501_migrations/reverse_migrations.ml[7,180+47]..test/501_migrations/reverse_migrations.ml[7,180+65]),None)
            ]
    ]
  structure_item (test/501_migrations/reverse_migrations.ml[9,248+0]..test/501_migrations/reverse_migrations.ml[9,248+36])
    Tstr_value Nonrec
    [
      <def>
        pattern (test/501_migrations/reverse_migrations.ml[9,248+4]..test/501_migrations/reverse_migrations.ml[9,248+6])
          Tpat_construct "()"
          []
        expression (test/501_migrations/reverse_migrations.ml[9,248+9]..test/501_migrations/reverse_migrations.ml[9,248+36])
          Texp_apply
          expression (test/501_migrations/reverse_migrations.ml[9,248+9]..test/501_migrations/reverse_migrations.ml[9,248+33])
            Texp_ident "Ppxlib!.Driver.standalone"
          [
            <arg>
              Nolabel
              expression (test/501_migrations/reverse_migrations.ml[9,248+34]..test/501_migrations/reverse_migrations.ml[9,248+36])
                Texp_construct "()"
                []
          ]
    ]
]

(let
  (Reverse/2236 =
     (apply
       (let (let/4874 = (field_imm 0 (global Ppxlib_ast__Import!)))
         (field_imm 0 (global Ppxlib_ast__Import!)))
       (let
         (let/4871 = (field_imm 14 (global Ppxlib_ast__Versions!))
          let/4872 =a (field_imm 14 (global Ppxlib_ast__Versions!)))
         (makeblock 0
           (let (let/4873 =a (field_mut 0 let/4872))
             (makeblock 0 (field_mut 1 let/4873) (field_mut 2 let/4873)))
           (field_mut 1 let/4872) (field_mut 2 let/4872)
           (field_mut 3 let/4872) (field_mut 4 let/4872)))))
  (seq
    (setfield_ptr(root-init) 0 (global Dune__exe__Reverse_migrations!)
      Reverse/2236)
    (let
      (*match*/4876 =
         (let
           (impl/2237 =
              (function str/2239
                (dirapply
                  (field_imm 0
                    (field_imm 6
                      (field_imm 0 (global Dune__exe__Reverse_migrations!))))
                  (apply
                    (field_imm 0
                      (field_imm 7
                        (field_imm 0 (global Dune__exe__Reverse_migrations!))))
                    str/2239))))
           (apply (field_imm 4 (global Ppxlib__Driver!)) 0 0 0 0
             (makeblock 0 impl/2237) 0 0 0 0 0 0 0 "reverse_migrations")))
      0)
    (let (*match*/4878 = (apply (field_imm 11 (global Ppxlib__Driver!)) 0))
      0)
    0))
(let
  (Reverse/2236 =
     (apply
       (let (let/4874 = (field_imm 0 (global Ppxlib_ast__Import!)))
         (field_imm 0 (global Ppxlib_ast__Import!)))
       (let
         (let/4871 = (field_imm 14 (global Ppxlib_ast__Versions!))
          let/4872 =a (field_imm 14 (global Ppxlib_ast__Versions!)))
         (makeblock 0
           (let (let/4873 =a (field_mut 0 let/4872))
             (makeblock 0 (field_mut 1 let/4873) (field_mut 2 let/4873)))
           (field_mut 1 let/4872) (field_mut 2 let/4872)
           (field_mut 3 let/4872) (field_mut 4 let/4872)))))
  (seq
    (setfield_ptr(root-init) 0 (global Dune__exe__Reverse_migrations!)
      Reverse/2236)
    (let
      (*match*/4876 =
         (let
           (impl/2237 =
              (function str/2239
                (apply
                  (field_imm 0
                    (field_imm 6
                      (field_imm 0 (global Dune__exe__Reverse_migrations!))))
                  (apply
                    (field_imm 0
                      (field_imm 7
                        (field_imm 0 (global Dune__exe__Reverse_migrations!))))
                    str/2239))))
           (apply (field_imm 4 (global Ppxlib__Driver!)) 0 0 0 0
             (makeblock 0 impl/2237) 0 0 0 0 0 0 0 "reverse_migrations")))
      0)
    (let (*match*/4878 = (apply (field_imm 11 (global Ppxlib__Driver!)) 0))
      0)
    0))
